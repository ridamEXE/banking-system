<div class="login-container">
  <h2>Bank Management System</h2>

  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <form #loginForm="ngForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label>Select Your Role:</label>
      <select name="role" [(ngModel)]="role" required>
        <option value="manager" selected>Bank Manager</option>
        <option value="employee">Bank Employee</option>
        <option value="customer">Customer</option>
      </select>
    </div>

    <div *ngIf="role === 'manager'">
      <div class="form-group">
        <label for="managerId">Manager ID</label>
        <input type="text" id="managerId" name="managerId" [(ngModel)]="credentials.managerId" required>
      </div>
      <div class="form-group">
        <label for="password">Password</label>
        <input type="password" id="password" name="password" [(ngModel)]="credentials.password" required
          pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" #passwordField="ngModel">
        <div *ngIf="passwordField.invalid && (passwordField.dirty || passwordField.touched)" class="error-message">
          <div *ngIf="passwordField.errors?.['required']">Password is required.</div>
          <div *ngIf="passwordField.errors?.['pattern']">
            Password must contain 8 characters [1 lowercase, 1 uppercase, 1 number, 1 special character ($, %, !, *, ?,
            &)]
          </div>

        </div>
      </div>
    </div>

    <div *ngIf="role === 'employee'">
      <div class="form-group">
        <label for="employeeId">Employee ID</label>
        <input type="number" id="employeeId" name="employeeId" [(ngModel)]="credentials.employeeId" required>
      </div>
      <div class="form-group">
        <label for="password">Password</label>
        <input type="password" id="password" name="password" [(ngModel)]="credentials.password" required
          pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" #passwordField="ngModel">
        <div *ngIf="passwordField.invalid && (passwordField.dirty || passwordField.touched)" class="error-message">
          <div *ngIf="passwordField.errors?.['required']">Password is required.</div>
          <div *ngIf="passwordField.errors?.['pattern']">
            Password must contain 8 characters [1 lowercase, 1 uppercase, 1 number, 1 special character ($, %, !, *, ?,
            &)]
          </div>

        </div>
      </div>
    </div>

    <div *ngIf="role === 'customer'">
      <div class="form-group">
        <label for="customerId">Customer ID</label>
        <input type="text" id="customerId" name="customerId" [(ngModel)]="credentials.customerId" required
         required pattern="^[A-Z]{4}[0-9]{6}$" #panField="ngModel">
      <div *ngIf="panField.invalid && (panField.dirty || panField.touched)" class="error-message">
        <div *ngIf="panField.errors?.['required']">Customer Id is required.</div>
        <div *ngIf="panField.errors?.['pattern']">Enter a valid Customer Id (e.g., ABDE123456).</div>
      </div>
      </div>
      <div class="form-group">
        <label for="accountNumber">Account Number</label>
        <input type="text" id="accountNumber" name="accountNumber" [(ngModel)]="credentials.accountNumber" required pattern="^\d{13}$" #toAccountField="ngModel">
        <div *ngIf="toAccountField.invalid && (toAccountField.dirty || toAccountField.touched)" class="error-message">
        <div *ngIf="toAccountField.errors?.['required']">Receiver's Account Number is required.</div>
        <div *ngIf="toAccountField.errors?.['pattern']">Must be exactly 13 numeric digits.</div>
      </div>
      </div>
      <div class="form-group">
        <label for="password">Password</label>
        <input type="password" id="password" name="password" [(ngModel)]="credentials.password" required
          pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" #passwordField="ngModel">
        <div *ngIf="passwordField.invalid && (passwordField.dirty || passwordField.touched)" class="error-message">
          <div *ngIf="passwordField.errors?.['required']">Password is required.</div>
          <div *ngIf="passwordField.errors?.['pattern']">
            Password must contain 8 characters [1 lowercase, 1 uppercase, 1 number, 1 special character ($, %, !, *, ?,
            &)]
          </div>

        </div>
      </div>
      <div class="form-group">
        <a href="/customer-registration" style="display: block;">New Customer? Register Here</a>
        <a href="/reset-password">Change Password</a>
      </div>
    </div>

    <button type="submit" [disabled]="!loginForm.valid">Login</button>
  
    <button  type="button" class="back-button" onclick="window.location.href='/home'">Back to Home</button>
  </form>

</div>